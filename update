#!/bin/bash -e

[ -z "$DEBUG" ] || set -x

main() {
  os_x_software_update
  update_package_sources
  upgrade_installed_packages
  update_vim_plugins
  cleanup
}

os_x_software_update() {
  softwareupdate --install --all
}

update_package_sources() {
  brew update
}

upgrade_installed_packages() {
  brew upgrade
}

update_vim_plugins() {
  vim +PluginUpdate +PluginClean! +qall
}

cleanup() {
  brew cleanup -s --force
}

main
